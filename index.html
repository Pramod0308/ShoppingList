<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1, viewport-fit=cover"
  />
  <title>Shopping List</title>

  <!-- PWA / Icons -->
  <link rel="manifest" href="manifest.webmanifest" />
  <meta name="theme-color" content="#2563eb" />
  <link rel="icon" type="image/png" sizes="32x32" href="favicon-32.png" />
  <link rel="icon" type="image/png" sizes="16x16" href="favicon-16.png" />
  <link rel="apple-touch-icon" sizes="192x192" href="icons/icon-192.png" />

  <!-- Fonts & Icons -->
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Material+Symbols+Outlined"
    rel="stylesheet"
  />

  <!-- Styles -->
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div class="app">

    <!-- ============== HOME (All Lists) ============== -->
    <section id="home" style="display:none">
      <header class="appbar">
        <h1 class="title">Your Lists</h1>
        <div class="appbar-actions">
          <button id="themeToggle" class="icon-btn" title="Toggle theme">
            <span class="material-symbols-outlined">dark_mode</span>
          </button>
        </div>
      </header>

      <section class="composer">
        <textarea id="itemInput" class="input textarea"
          placeholder="Add an itemâ€¦ (Enter = add, Shift+Enter = new line)"
          rows="1"></textarea>
        <button id="addBtn" class="btn primary">
          <span class="material-symbols-outlined">add</span>&nbsp;Add
        </button>
      </section>


      <div id="listsGrid" class="cards-grid"></div>
    </section>

    <!-- ============== LIST VIEW (Items in a List) ============== -->
    <section id="listView" style="display:none">
      <header class="appbar">
        <div class="left">
          <button id="backHome" class="icon-btn" title="All lists">
            <span class="material-symbols-outlined">arrow_back</span>
          </button>
          <input id="listName" class="title editable" placeholder="List name" />
        </div>
        <div class="appbar-actions">
          <button id="shareBtn" class="icon-btn" title="Share list">
            <span class="material-symbols-outlined">share</span>
          </button>
          <button id="toggleDates" class="icon-btn" title="Toggle timestamps">
            <span class="material-symbols-outlined">schedule</span>
          </button>
          <button id="themeToggle2" class="icon-btn" title="Toggle theme">
            <span class="material-symbols-outlined">dark_mode</span>
          </button>
        </div>
      </header>

      <section class="composer">
        <input id="itemInput" class="input" placeholder="Add item" />
        <button id="addBtn" class="btn primary">
          <span class="material-symbols-outlined">add</span>&nbsp;Add
        </button>
      </section>

      <section class="meta">
        <span id="remaining"></span>
        <div class="actions">
          <button id="clearCompleted" class="btn">
            <span class="material-symbols-outlined">done_all</span>&nbsp;Clear completed
          </button>
          <button id="clearAll" class="btn">
            <span class="material-symbols-outlined">delete_sweep</span>&nbsp;Clear all
          </button>
        </div>
      </section>

      <ul id="list" class="cards"></ul>

      <footer class="footer">
        <span>Offline-ready PWA</span>
      </footer>
    </section>

  </div>

  <noscript>This app needs JavaScript enabled.</noscript>

  <!-- Service worker -->
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('sw.js', { scope: './' });
      });
    }
  </script>

  <!-- App scripts -->
  <script type="module" src="supabase-config.js"></script>
  <script type="module" src="app.js"></script>
</body>
</html>
